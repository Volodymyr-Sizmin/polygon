set $cors '';
if ($http_origin ~ '^https?://(localhost|10.10.14.21|10.10.14.22|polygon-application-php.andersenlab.dev)') {
        set $cors 'true';
}


if ($cors = 'true') {
        add_header 'Access-Control-Allow-Origin' "*" always;
        add_header 'Access-Control-Allow-Credentials' 'true' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, PATCH, DELETE, OPTIONS' always;
        add_header 'Access-Control-Allow-Headers' 'Access-Control-Allow-Headers,Accept,Cache-Control,Content-Type,Keep-Alive,Origin,User-Agent,Authorization' always;
}

if ($request_method = 'OPTIONS') {
        return 200;
}